SET ECHO ON;
DROP TABLE COURSE CASCADE CONSTRAINTS;
DROP TABLE STUDENT CASCADE CONSTRAINTS;
DROP TABLE CLASS CASCADE CONSTRAINTS;
DROP TABLE COMPONENT CASCADE CONSTRAINTS;
DROP TABLE ENROLL CASCADE CONSTRAINTS;
DROP TABLE SCORES CASCADE CONSTRAINTS;


CREATE TABLE COURSE (
    CNO VARCHAR2(5) PRIMARY KEY,
    CTITLE VARCHAR2(40)
);

CREATE TABLE STUDENT (
    SID INTEGER PRIMARY KEY,
    FNAME VARCHAR2(20),
    LNAME VARCHAR2(20),
    MINIT VARCHAR2(1)
);

CREATE TABLE CLASS (
    TERM VARCHAR2(3),
    SECTNO INTEGER,
    CNO VARCHAR2(5),
    A INTEGER,
    B INTEGER,
    C INTEGER,
    D INTEGER,
    PRIMARY KEY (TERM, SECTNO),
    FOREIGN KEY (CNO) REFERENCES COURSE(CNO) ON DELETE CASCADE
);

CREATE TABLE COMPONENT(
    TERM VARCHAR2(3),
    SECTNO INTEGER,
    COMPNAME VARCHAR2(15),
    MAXPOINTS INTEGER,
    WEIGHT INTEGER,
    PRIMARY KEY (TERM, SECTNO, COMPNAME),
    FOREIGN KEY (TERM, SECTNO) REFERENCES CLASS(TERM, SECTNO) ON DELETE CASCADE
);

CREATE TABLE ENROLL (
    SID INTEGER,
    TERM VARCHAR2(3),
    SECTNO INTEGER,
    PRIMARY KEY (SID, TERM, SECTNO),
    FOREIGN KEY (SID) REFERENCES STUDENT (SID) ON DELETE CASCADE,
    FOREIGN KEY (TERM, SECTNO) REFERENCES CLASS(TERM, SECTNO) ON DELETE CASCADE
);

CREATE TABLE SCORES (
    SID INTEGER,
    TERM VARCHAR2(3),
    SECTNO INTEGER,
    COMPNAME VARCHAR2(15),
    POINTS INTEGER,
    PRIMARY KEY (SID, TERM, SECTNO, COMPNAME),
    FOREIGN KEY (SID, TERM, SECTNO) REFERENCES ENROLL(SID, TERM, SECTNO) ON DELETE CASCADE,
    FOREIGN KEY (TERM, SECTNO, COMPNAME) REFERENCES COMPONENT(TERM, SECTNO, COMPNAME) ON DELETE CASCADE
);

INSERT INTO COURSE VALUES ('CS226', 'Introduction to Programming I');
INSERT INTO COURSE VALUES ('CS227', 'Introduction to Programming II');
INSERT INTO COURSE VALUES ('CS343', 'Introduction to Linux');

INSERT INTO STUDENT VALUES ('1111', 'Susan', 'Jones', 'B');
INSERT INTO STUDENT VALUES ('2222', 'Samuel', 'Corn', 'A');
INSERT INTO STUDENT VALUES ('3333', 'Willie', 'Smith', '');
INSERT INTO STUDENT VALUES ('4444', 'Jerome', 'Franks', 'B');
INSERT INTO STUDENT VALUES ('5555', 'Sally', 'Williams', 'G');
INSERT INTO STUDENT VALUES ('6666', 'Willie', 'Brown', 'F');
INSERT INTO STUDENT VALUES ('7777', 'Jonathan', 'Miller', '');
INSERT INTO STUDENT VALUES ('8888', 'Mary', 'Jones', 'C');

INSERT INTO CLASS VALUES ('F18', '1031', 'CS226', '90', '80', '65', '50');
INSERT INTO CLASS VALUES ('F18', '1032', 'CS226', '90', '80', '65', '50');
INSERT INTO CLASS VALUES ('S19', '1031', 'CS227', '90', '80', '70', '55');
INSERT INTO CLASS VALUES ('F19', '1032', 'CS343', '92', '82', '75', '60');

INSERT INTO COMPONENT VALUES ('F18', '1031', 'Exam1', '100', '30');
INSERT INTO COMPONENT VALUES ('F18', '1031', 'Quizzes', '80', '20');
INSERT INTO COMPONENT VALUES ('F18', '1031', 'Final', '100', '50');
INSERT INTO COMPONENT VALUES ('F18', '1032', 'Programs', '400', '40');
INSERT INTO COMPONENT VALUES ('F18', '1032', 'Midterm', '100', '20');
INSERT INTO COMPONENT VALUES ('F18', '1032', 'Final', '100', '40');
INSERT INTO COMPONENT VALUES ('S19', '1031', 'Exam', '100', '50');
INSERT INTO COMPONENT VALUES ('S19', '1031', 'Project', '100', '50');
INSERT INTO COMPONENT VALUES ('F19', '1032', 'Paper', '100', '100');

INSERT INTO ENROLL VALUES ('1111', 'F18', '1031');
INSERT INTO ENROLL VALUES ('2222', 'F18', '1031');
INSERT INTO ENROLL VALUES ('4444', 'F18', '1031');
INSERT INTO ENROLL VALUES ('5555', 'F18', '1032');
INSERT INTO ENROLL VALUES ('6666', 'F18', '1032');
INSERT INTO ENROLL VALUES ('3333', 'F18', '1032');
INSERT INTO ENROLL VALUES ('1111', 'S19', '1031');
INSERT INTO ENROLL VALUES ('3333', 'S19', '1031');
INSERT INTO ENROLL VALUES ('3333', 'F19', '1032');

INSERT INTO SCORES VALUES ('1111', 'F18', '1031', 'Exam1', '90');
INSERT INTO SCORES VALUES ('1111', 'F18', '1031', 'Quizzes', '75');
INSERT INTO SCORES VALUES ('1111', 'F18', '1031', 'Final', '95');
INSERT INTO SCORES VALUES ('2222', 'F18', '1031', 'Exam1', '70');
INSERT INTO SCORES VALUES ('2222', 'F18', '1031', 'Quizzes', '40');
INSERT INTO SCORES VALUES ('2222', 'F18', '1031', 'Final', '82');
INSERT INTO SCORES VALUES ('4444', 'F18', '1031', 'Exam1', '83');
INSERT INTO SCORES VALUES ('4444', 'F18', '1031', 'Quizzes', '71');
INSERT INTO SCORES VALUES ('4444', 'F18', '1031', 'Final', '74');
INSERT INTO SCORES VALUES ('5555', 'F18', '1032', 'Programs', '400');
INSERT INTO SCORES VALUES ('5555', 'F18', '1032', 'Midterm', '95');
INSERT INTO SCORES VALUES ('5555', 'F18', '1032', 'Final', '99');
INSERT INTO SCORES VALUES ('6666', 'F18', '1032', 'Programs', '340');
INSERT INTO SCORES VALUES ('6666', 'F18', '1032', 'Midterm', '65');
INSERT INTO SCORES VALUES ('6666', 'F18', '1032', 'Final', '95');
INSERT INTO SCORES VALUES ('3333', 'F18', '1032', 'Programs', '380');
INSERT INTO SCORES VALUES ('3333', 'F18', '1032', 'Midterm', '75');
INSERT INTO SCORES VALUES ('3333', 'F18', '1032', 'Final', '88');
INSERT INTO SCORES VALUES ('1111', 'S19', '1031', 'Exam', '80');
INSERT INTO SCORES VALUES ('1111', 'S19', '1031', 'Project', '90');
INSERT INTO SCORES VALUES ('3333', 'S19', '1031', 'Exam', '80');
INSERT INTO SCORES VALUES ('3333', 'S19', '1031', 'Project', '85');


COMMIT;










